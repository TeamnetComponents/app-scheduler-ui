<div ng-show="showCreateOrEdit">
    <form name="formCreateOrEdit" role="form" ng-submit="createOrUpdate()" novalidate>

        <input type="hidden" name="id"
               ng-model="schedule.id" readonly>

        <br>

        <div class="form-inline">
            <label class="my-md-label"> Select job : </label>
            <select name="job_selector" class="form-control" ng-model="schedule.scheduledJob.id" placeholder="Job list"
                    required>
                <option ng-value="scheduledJob.id" ng-repeat="scheduledJob in scheduledJobs">
                    {{ scheduledJob.id}}
                </option>
            </select>
        </div>

        <br>

        <hr class="divider"/>

        <br>

        <div class="form-group">
            <label class="my-md-label"> Job options : </label>

            <md-input-container>
                <md-checkbox class="md-primary" type="checkbox" name="schedule_active" ng-model="schedule.active"
                             checked>
                    Active
                </md-checkbox>
            </md-input-container>

            <md-input-container>
                <md-checkbox class="md-primary" type="checkbox" name="schedule_recurrent" ng-model="schedule.recurrent">
                    Recurrent
                </md-checkbox>
            </md-input-container>
        </div>

        <hr class="divider"/>

        <br>

        <div class="form-group">
            <div class="non-recurrent-job" ng-show="!schedule.recurrent">
                <label class="my-md-label"> Execution options : </label>
                <md-input-container style="width:30%">
                    <label>StartTime</label>
                    <input type="datetime-local" name="schedule_startTime"
                           min="{{getCurrentDate() | date: 'yyyy-MM-ddTHH:mm'}}" ng-model="schedule.startTime"
                           ng-required="!schedule.recurrent">
                </md-input-container>
                <p ng-show="formCreateOrEdit.schedule_startTime.$invalid && !formCreateOrEdit.schedule_startTime.$pristine"
                   class="alert-danger"> Execution date needs to be greater than current date!</p>

            </div>

            <div class="recurrent-job" ng-show="schedule.recurrent">
                <label class="my-md-label"> Repetition options : </label>

                <div layout="" layout-sm="column">

                    <md-input-container style="width:33%; margin:10px;">
                        <label>StartTime</label>
                        <input type="datetime-local" name="schedule_startTime_rec"
                               ng-model="schedule.startTime" ng-required="schedule.recurrent">
                    </md-input-container>

                    <md-input-container style="width:33%; margin:10px;">
                        <label>EndTime(optional) </label>
                        <input type="datetime-local" name="schedule_endTime"
                               min="{{getCurrentDate() | date: 'yyyy-MM-ddTHH:mm'}}" ng-model="schedule.endTime">
                    </md-input-container>

                    <md-input-container style="width:33%; margin:10px;">
                        <label>Number of repetitions(optional)</label>
                        <input type="number" name="schedule_repetitions" min="0" ng-model="schedule.repetitions">
                    </md-input-container>
                </div>

                <p ng-show="formCreateOrEdit.schedule_endTime.$invalid && !formCreateOrEdit.schedule_endTime.$pristine"
                   class="alert-danger"> End date date needs to be greater than current date!</p>

                <div class="form-inline">
                    <span class="my-md-label"> Select repetition type : </span>
                    <select name="job_selector" class="form-control" ng-model="selectedRepetitionType"
                            placeholder="Repetition type"
                            ng-change="changeRepetitionType()" ng-required="schedule.recurrent">
                        <option ng-selected="repetitionType.id == 1" ng-value="repetitionType.id"
                                ng-repeat="repetitionType in repetitionTypes">
                            {{ repetitionType.name }}
                        </option>
                    </select>
                </div>
            </div>
        </div>

        <hr class="divider"/>

        <br>

        <div class="form-group" ng-show="schedule.recurrent">

            <div class="regular-intervals" ng-show="regularIntervals">
                <label class="my-md-label"> Regular intervals options : </label>
                <br><br>

                <div class="form-inline">
                    <span class="my-md-label"> Select interval : </span>
                    <select ng-model="schedule.timeInterval.id" class="form-control" style="width:auto"
                            placeholder="Time interval list">
                        <optgroup label="Predefined">
                            <option ng-value="timeInterval.id" ng-repeat="timeInterval in timeIntervals | filter:{'custom':false}">
                                {{ timeInterval.name}}
                            </option>
                        </optgroup>
                        <optgroup label="Custom">
                            <option ng-value="timeInterval.id" ng-repeat="timeInterval in timeIntervals | filter:{'custom':true}">
                                {{ timeInterval.name}}
                            </option>
                        </optgroup>
                    </select>
                </div>

                <md-switch class="md-primary" md-no-ink="" ng-model="customDefinedIntervals">
                    Create custom time interval
                </md-switch>

                <br>

                <div class="row" ng-show="customDefinedIntervals">
                    <div class="col-lg-4">
                        <md-whiteframe class="md-whiteframe-z2" layout="" layout-align="center center">
                                {{createdNewEvent}}
                                <div ng-controller="TimeIntervalController" class="custom_intervals" ng-include="'scheduler/views/timeInterval/timeIntervalForm.html'"></div>
                        </md-whiteframe>
                    </div>
                </div>
            </div>


            <div class="custom-fire-times" ng-show="!regularIntervals">
                <label class="my-md-label"> Custom fire times options : </label>
                <br><br>

                <div class="custom_fire_times" ng-include="'scheduler/views/scheduleOk/customFireTimes.html'"></div>
            </div>

            <!--<md-input-container>
                <label>Cron</label>
                <input type="text" name="schedule_cron"
                       ng-model="schedule.cron">
            </md-input-container>-->
        </div>


        <br/><br/>
        <br/><br/>

        <div class="row" style="text-align: center">
            <button type="button" class="btn btn-default" ng-click="back()">
                <span class="md-raised"></span>&nbsp;<span>Cancel</span>
            </button>
            <button type="submit"
                    ng-disabled="formCreateOrEdit.$invalid || (!formCreateOrEdit.$invalid && schedule.recurrent && !regularIntervals &&  (nrSelectedCustom <= 0))"
                    class="btn btn-default">
                <span class="md-raised"></span>&nbsp;<span>Save</span>
            </button>
        </div>
    </form>
</div>

<div>
    <div class="modal fade" id="deleteScheduleConfirmation">
        <div class="modal-dialog">
            <div class="modal-content">
                <form name="form" ng-submit="confirmDelete()">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                                ng-click="clear()">&times;</button>
                        <h4 class="modal-title">Confirm delete operation</h4>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete this row ?</p>
                    </div>
                    <div class="modal-footer">
                        <section layout="row" layout-sm="column" layout-align="right">
                            <md-button class="md-raised" data-dismiss="modal" ng-click="back()">Cancel
                            </md-button>
                            <md-button type="submit" class="md-raised" ng-disabled="form.$invalid">Delete
                            </md-button>
                        </section>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>